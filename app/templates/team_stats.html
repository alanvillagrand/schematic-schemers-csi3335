{% extends "base.html" %}

{% block body %}

<style>
table, th, td {
    border: 1px solid black;
}
table.center {
    margin-left: auto;
    margin-right: auto;
}
.depth-chart {
    display: grid;
    grid-template-areas:
        ". . _CF . ."
        ". _LF . _RF ."
        ". _SS . _2B ."
        ". _3B . _1B ."
        ". . _C . .";
    grid-gap: 10px;
    text-align: center;
}
.position-box {
    border: 1px solid orange;
    padding: 10px;
    background-color: #f9f9f9;
}
._LF { grid-area: _LF; }
._CF { grid-area: _CF; }
._RF { grid-area: _RF; }
._SS { grid-area: _SS; }
._2B { grid-area: _2B; }
._3B { grid-area: _3B; }
._1B { grid-area: _1B; }
._C { grid-area: _C; }
</style>

<div class="container">
    <h1>{{ year }} {{ team_name }}</h1>

    {% if team_info %}
        <p><strong>Wins:</strong> {{ team_info.team_W }}</p>
        <p><strong>Losses:</strong> {{ team_info.team_L }}</p>
        <p><strong>Rank:</strong> {{ team_info.team_rank }}</p>
        <p><strong>Stadium:</strong> {{ team_info.park_name }}</p>
    {% else %}
        <p>No data found for the selected team and year.</p>
    {% endif %}

    <!-- Batting Information -->
    <h2>Batting Stats</h2>

    {% if batting_info %}
        <table>
            <tr>
                <th>Name</th>
                <th>Age</th>
                <th>G</th>
                <th>PA</th>
                <th>HR</th>
                <th>SB</th>
                <th>BB%</th>
                <th>K%</th>
                <th>ISO</th>
                <th>BABIP</th>
                <th>AVG</th>
                <th>OBP</th>
                <th>SLG</th>
                <th>wOBA</th>
                <!-- <th>wRC+</th> -->
                <th>BsR</th>
                <!-- <th>Off</th>
                <th>Def</th> -->
                <th>WAR</th>
            </tr>
            <tr>
                {% for row in batting_info %}
                    <tr>
                        {% for col in row %}
                            {% if col == None %}
                                <td>0</td>
                            {% else %}
                                <td>{{ col }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tr>
        </table>
    {% else %}
        <p>No batting information found.</p>
    {% endif %}

    <!-- Pitching Information -->
    <h2>Pitching Stats</h2>

    {% if pitching_info %}
        <table>
            <tr>
                <th>Name</th>
                <th>Age</th>
                <th>G</th>
                <th>IP</th>
                <th>K%</th>
                <th>BB%</th>
                <th>HR/9</th>
                <th>BABIP</th>
                <th>LOB%</th>
                <th>GB%</th>
                <th>HR/FB</th>
                <th>ERA</th>
                <th>FIP</th>
                <th>xFIP</th>
                <th>WAR</th>
            </tr>
            <tr>
                {% for row in pitching_info %}
                    <tr>
                        {% for col in row %}
                            {% if col == None %}
                                <td>0</td>
                            {% else %}
                                <td>{{ col }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tr>
        </table>
    {% else %}
        <p>No pitching information found.</p>
    {% endif %}

    <!-- Depth Chart -->
    <h2>Depth Chart</h2>

    {% if position_info %}
        <div style="margin-bottom: 20px;">
            <label for="position-players-stats">Select projected stats displayed for Position Players:</label>
            <select id="position-players-stats" name="position-players-stats">
                <option value="playing-time">Playing Time</option>
                <option value="batting-average">PA</option>
                <option value="home-runs">WAR</option>
                <option value="rbis">wOBA</option>
            </select>
        
            <label for="pitchers-stats">Pitchers:</label>
            <select id="pitchers-stats" name="pitchers-stats">
                <option value="playing-time">Playing Time</option>
                <option value="strikeouts">IP</option>
                <option value="era">ERA</option>
                <option value="wins">FIP</option>
            </select>
        </div>
        <div class="depth-chart">
            {% for position, players in position_info.items() %}
            <div class="position-box _{{ position }}">
                <strong>{{ position }}</strong>
                <ul>
                    {% for player in players %}
                    <li>{{ player.name }}: {{ player.statistic }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>No position data found.</p>
    {% endif %}

    <a href="{{ url_for('team.team_stats') }}">Search again</a>
</div>

{% endblock %}